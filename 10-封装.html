<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#box{width: 120px;height: 120px;background: red;position: absolute;left: 500px;}
			#box2{width: 120px;height: 120px;background: red;position: absolute;left: 0;}
		</style>
	</head>
	<body>
		
		
		<div id="box">
			
		</div>
		
		
		<div id="box2">
			
		</div>
		
		<script type="text/javascript">
// 水平方向 匀速  
// 垂直 匀加速       
// 抛物线
			let box = document.querySelector('#box')
			
			let dri = 'width'
			let target = 300;
			
			animate(box,{left:0,top:200})
			
			
			
			animate(box,{left:200,top:0})
			// animate(box2,{height:300})
			
			
			function animate(box,obj){
				clearInterval(box.timer)
				
				
				box.timer = setInterval(()=>{
					let flag = true;
					for(let attr in obj){
						//属性名和属性值
						// console.log(attr,obj[attr])
						let dri = attr;
						let target = obj[attr]
						
						
						let speed = (target-parseFloat(getComputedStyle(box)[dri]))/8
						if(speed>0){
							speed = Math.ceil(speed)
						}else{
							speed = Math.floor(speed)
						}
						box.style[dri] = parseFloat(getComputedStyle(box)[dri])+ speed+'px'
						
						// console.log(speed)
						if(parseFloat(getComputedStyle(box)[dri]) == target){
							
						}else{
							flag = false
						}
						
					}
					console.log(flag)
					if(flag == true){
						clearInterval(box.timer)
					}
					
					//什么时候停止定时器
					// clearInterval(box.timer)
					
					
					
				},80)
			}
			
			
		</script>
		
	</body>
</html>
